Данный скрипт реализует функциональность для отправки электронных писем через SMTP-сервер. 
Он поддерживает отправку различных сообщений в формате HTML и использует библиотеку smtplib для работы с 
почтовыми протоколами.

Импортируемые библиотеки:
    smtplib: используется для отправки почты через протокол SMTP.
    email.mime.multipart: предоставляет возможность создания составных сообщений электронной почты (например, с вложениями).
    email.mime.application: используется для работы с вложениями в письмах.
    email.mime.text: используется для генерации текстового содержимого электронного письма.

Конфигурация
Скрипт использует переменные конфигурации SERVER_MAIL_ADDRES и SERVER_MAIL_PASSWORD, 
которые должны быть предварительно определены в файле config.py.

Функции
1. send_message(dest_addr, text)
Отправляет электронное письмо на указанный адрес.

Параметры:
    dest_addr (str): Адрес электронной почты получателя.
    text (dict): Словарь, содержащий заголовок и тело письма:
        head (str): Заголовок письма.
        body (str): Текст письма в формате HTML.

Исключения:
При возникновении ошибок при соединении или отправке сообщения, будет выброшено соответствующее исключение.

2. text_gen(key, username=None, race_id=None, race_date=None, race_new_date=None)
Генерирует текст сообщения и возвращает его в формате словаря в зависимости от указанного ключа.

Параметры:
    key (str): Ключ, определяющий тип сообщения:
        "destination_soon": Сообщение о скором прибытии.
        "home_soon": Сообщение о скором возвращении домой.
        "trip_is_cancelled": Сообщение о том, что поездка отменена.
        "trip_reschedule": Сообщение об изменении даты поездки.
    username (str, необязательный): Имя пользователя для персонализации сообщения.
    race_id (str, необязательный): Идентификатор поездки (если применимо).
    race_date (str, необязательный): Дата поездки.
    race_new_date (str, необязательный): Новая дата поездки (если применимо).

Возвращает:
    dict: Словарь, содержащий заголовок и тело сообщения, если ключ совпадает с одним из предопределенных значений.
    None: Если ключ не найден.

Примечания
Перед использованием данной библиотеки необходимо убедиться, что все нужные настройки для SMTP-сервера корректны.
Для отправки сообщений на электронные почты необходимо оставить параметры передавать корректные username, race_id, и даты, чтобы сообщения были актуальными и информативными.

Пример использования:

    from config import *
    from script_name import send_message, text_gen

    # Пример генерации текста сообщения
    message_content = text_gen("home_soon", username="Иван", race_date="2025-05-01")

    # Пример отправки сообщения
    send_message("recipient@example.com", message_content)

Эта документация должна помочь в понимании структуры и функциональности предоставленного кода.